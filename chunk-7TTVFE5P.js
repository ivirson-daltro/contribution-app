import{a as ae}from"./chunk-VJW6L6XC.js";import{d as Ae,f as Ne,g as Ve}from"./chunk-27WFYMEC.js";import{a as Fe}from"./chunk-NIEKKRHJ.js";import{b as Oe}from"./chunk-SAS3ZBHO.js";import{b as ee}from"./chunk-EXYSGIRZ.js";import"./chunk-B6MZDIDR.js";import"./chunk-6KAU6AGX.js";import{a as te,b as Ie,c as ke,d as ne,e as ie,f as oe,g as re}from"./chunk-EUNYGG56.js";import{a as we}from"./chunk-2J3QXTNU.js";import{c as k,e as h,g as R,h as H,k as Ee,l as Y,m as ye,o as K,p as Q,q as T,r as F,s as A,t as Me,u as Se,v as X,w as Pe,x as Z}from"./chunk-H3SVK5VC.js";import{a as Re,b as Te}from"./chunk-LF2PKW2K.js";import{a as N,b as V}from"./chunk-ATKN46PQ.js";import{M as De}from"./chunk-D735FC2V.js";import{$ as x,$a as M,Ab as C,Bb as P,Cb as z,Da as O,Db as G,E as j,Eb as L,Gb as W,Ia as w,Jb as fe,Lb as I,Mb as q,Ob as _e,Pb as be,R as ue,W as _,Wa as g,Ya as f,Za as D,_ as b,_a as ge,ab as S,bb as u,cb as o,db as i,eb as d,ib as y,jc as J,kb as m,kc as xe,lb as p,lc as Ce,mc as he,qc as ce,rc as ve,xb as $,xc as v,ya as s,zb as a}from"./chunk-2AFPZVH2.js";import{a as de,b as pe}from"./chunk-7CGTOI24.js";var B=class r{httpClient=_(ve);getCategories(){return this.httpClient.get(`${v.apiUrl}/domain/expense-categories`)}getExpenses(n,t,e,l=1,c=10,se,ze="desc"){let E=new ce().set("page",l.toString()).set("limit",c.toString());return se&&(E=E.set("sortBy",se).set("sortDirection",ze)),n&&(E=E.set("startDate",n)),t&&(E=E.set("endDate",t)),e&&(E=E.set("categoryId",e)),this.httpClient.get(`${v.apiUrl}/expenses/paginated`,{params:E})}saveExpense(n){return this.httpClient.post(`${v.apiUrl}/expenses`,n)}updateExpense(n,t){return this.httpClient.put(`${v.apiUrl}/expenses/${t}`,n)}getById(n){return this.httpClient.get(`${v.apiUrl}/expenses/${n}`)}deleteExpense(n){return this.httpClient.delete(`${v.apiUrl}/expenses/${n}`)}getMonthlyReport(n,t){let e=new ce().set("month",n).set("year",t.toString());return this.httpClient.get(`${v.apiUrl}/expenses/monthly/report`,{params:e,responseType:"blob"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=ue({token:r,factory:r.\u0275fac,providedIn:"root"})};function We(r,n){if(r&1&&(o(0,"option",10),a(1),i()),r&2){let t=n.$implicit;u("value",t.id),s(),C(t.description)}}function qe(r,n){if(r&1){let t=y();o(0,"div",20)(1,"a",27),m("click",function(l){b(t);let c=p();return c.downloadAttachment(c.data==null?null:c.data.attachmentUrl),x(l.preventDefault())}),d(2,"mat-icon",28),a(3," Baixar arquivo atual "),i()()}}var U=class r{constructor(n,t){this.dialogRef=n;this.data=t}selectedFile=null;expensesService=_(B);utilsService=_(ae);toastService=_(ee);fb=_(X);form;categories$=this.expensesService.getCategories();today=new Date;maxDate=this.today.toISOString().substring(0,10);ngOnInit(){this.buildForm(),this.data&&this.form.patchValue({value:this.data.value,description:this.data.description,categoryId:this.data.categoryId,date:this.data.date?this.data.date.substring(0,10):this.today.toISOString().substring(0,10),notes:this.data.notes||""})}buildForm(){this.form=this.fb.group({value:[null,h.required],description:[null,h.required],categoryId:["",h.required],date:[this.today.toISOString().substring(0,10),h.required],notes:[""]})}submit(){let n=this.form.getRawValue(),t=pe(de({},n),{value:this.utilsService.normalizeAmount(n.value),attachmentUrl:this.data?.attachmentUrl??null}),e=new FormData;e.append("expense",JSON.stringify(t)),this.selectedFile&&e.append("file",this.selectedFile),this.data?(e.append("id",this.data.id),this.updateExpense(e,this.data.id)):this.saveExpense(e)}saveExpense(n){this.expensesService.saveExpense(n).subscribe({next:()=>{this.dialogRef.close(!0)},error:t=>{this.toastService.error("Erro ao salvar despesa. Por favor, tente novamente.")}})}updateExpense(n,t){this.expensesService.updateExpense(n,t).subscribe({next:()=>{this.dialogRef.close(!0)},error:e=>{this.toastService.error("Erro ao atualizar despesa. Por favor, tente novamente.")}})}onFileSelected(n){let t=n.target;t.files&&t.files.length>0?this.selectedFile=t.files[0]:this.selectedFile=null}async downloadAttachment(n){this.utilsService.downloadAttachment(n,"Comprovante de Despesa")}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||r)(O(te),O(Ie))};static \u0275cmp=w({type:r,selectors:[["app-add-expenses"]],decls:46,vars:9,consts:[[1,"cadastrar-container"],[1,"cadastrar-card"],["mat-dialog-title","",1,"card-title"],[1,"contribution-form",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"row"],[1,"col-lg-6"],["for","categoryId",1,"form-label"],["formControlName","categoryId",1,"form-control"],["value","","disabled","","selected",""],[3,"value"],["for","value",1,"form-label"],["type","text","formControlName","value","placeholder","R$ 0,00","mask","separator.2","thousandSeparator",".","decimalMarker",",","prefix","R$ ","inputMode","decimal","autocomplete","off",1,"form-control",3,"blur","dropSpecialCharacters"],["for","date",1,"form-label"],["type","date","formControlName","date","placeholder","Digite a data",1,"form-control",3,"max"],["for","description",1,"form-label"],["type","text","formControlName","description","placeholder","Digite a descri\xE7\xE3o",1,"form-control"],[1,"col-lg-12"],["for","attachment",1,"form-label"],["type","file","id","attachment","accept",".pdf,.jpg,.jpeg,.png",1,"form-control",3,"change"],[1,"mt-2"],["for","notes",1,"form-label"],["formControlName","notes",1,"form-control"],["align","end",1,"form-footer"],["type","button",1,"btn","cancel-button",3,"click"],["type","submit",1,"btn","btn-primary","submit-button",3,"disabled"],["fontIcon","save",1,"submit-icon"],["href","#",1,"attachment-link",3,"click"],["fontIcon","attach_file"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),a(3),i(),o(4,"form",3),m("ngSubmit",function(){return e.submit()}),o(5,"mat-dialog-content")(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),a(10,"Tipo de Despesa"),i(),o(11,"select",8)(12,"option",9),a(13,"- Selecione"),i(),M(14,We,2,2,"option",10,D),I(16,"async"),i()(),o(17,"div",6)(18,"label",11),a(19,"Valor"),i(),o(20,"input",12),m("blur",function(){return e.utilsService.onAmountBlur(e.form,"value")}),i()()()(),o(21,"div",4)(22,"div",5)(23,"div",6)(24,"label",13),a(25,"Data"),i(),d(26,"input",14),i(),o(27,"div",6)(28,"label",15),a(29,"Descri\xE7\xE3o"),i(),d(30,"input",16),i(),o(31,"div",17)(32,"label",18),a(33,"Anexar Comprovante"),i(),o(34,"input",19),m("change",function(c){return e.onFileSelected(c)}),i(),g(35,qe,4,0,"div",20),i()()(),o(36,"div",4)(37,"label",21),a(38,"Observa\xE7\xF5es"),i(),d(39,"textarea",22),i()(),o(40,"mat-dialog-actions",23)(41,"button",24),m("click",function(){return e.close()}),a(42,"Cancelar"),i(),o(43,"button",25),d(44,"mat-icon",26),a(45),i()()()()()),t&2&&(s(3),P("",e.data?"Editar":"Nova"," Despesa"),s(),u("formGroup",e.form),s(10),S(q(16,7,e.categories$)),s(6),u("dropSpecialCharacters",!1),s(6),u("max",e.maxDate),s(9),f(e.data!=null&&e.data.attachmentUrl&&!e.selectedFile?35:-1),s(8),u("disabled",e.form.invalid),s(2),P(" ",e.data?"Editar":"Registrar"," Despesa "))},dependencies:[Z,Y,F,A,k,T,R,H,Q,K,re,ne,oe,ie,V,N,Ne,Ae,Ve,Oe,J],styles:[".cadastrar-container[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:700;color:#0b2454}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]{padding-top:.25rem}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:600;margin-bottom:.35rem;color:#374151}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#f7f9fc;border-radius:.75rem}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#d1d5db}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#1d4ed8}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #e5e7eb;display:flex;gap:1rem;align-items:center}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{color:#6b7280}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:3rem;border-radius:.625rem;background-color:#0b2454;font-weight:600}.attachment-link[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0b2454;text-decoration:none}.attachment-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;margin-left:.25rem;margin-top:.25rem}@media(max-width:600px){.cadastrar-card[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1.75rem}}"]})};function Je(r,n){if(r&1&&(o(0,"option",7),a(1),i()),r&2){let t=n.$implicit;u("value",t.value),s(),C(t.label)}}var le=class r{constructor(n,t){this.fb=n;this.dialogRef=t;let e=new Date,l=(e.getMonth()+1).toString().padStart(2,"0");this.form=this.fb.group({month:[l,h.required],year:[e.getFullYear(),[h.required,h.min(2e3),h.max(2100)]]})}form;months=[{value:"01",label:"Janeiro"},{value:"02",label:"Fevereiro"},{value:"03",label:"Mar\xE7o"},{value:"04",label:"Abril"},{value:"05",label:"Maio"},{value:"06",label:"Junho"},{value:"07",label:"Julho"},{value:"08",label:"Agosto"},{value:"09",label:"Setembro"},{value:"10",label:"Outubro"},{value:"11",label:"Novembro"},{value:"12",label:"Dezembro"}];submit(){this.form.valid&&this.dialogRef.close(this.form.value)}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||r)(O(X),O(te))};static \u0275cmp=w({type:r,selectors:[["app-monthly-report-dialog"]],decls:22,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"monthly-report-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","month",1,"form-label"],["formControlName","month",1,"form-control"],["selected","",3,"value"],[3,"value"],["for","year",1,"form-label"],["id","year","type","number","formControlName","year","min","2025","max","2100",1,"form-control"],["mat-dialog-actions","",1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-primary","submit-button",3,"click","disabled"],["fontIcon","download",1,"submit-icon"],["type","button",1,"btn","cancel-button",3,"click"]],template:function(t,e){t&1&&(o(0,"h2",0),a(1,"Relat\xF3rio mensal"),i(),o(2,"div",1)(3,"form",2),m("ngSubmit",function(){return e.submit()}),o(4,"div",3)(5,"label",4),a(6,"M\xEAs"),i(),o(7,"select",5)(8,"option",6),a(9,"- Selecione"),i(),M(10,Je,2,2,"option",7,D),i()(),o(12,"div",3)(13,"label",8),a(14,"Ano"),i(),d(15,"input",9),i()()(),o(16,"div",10)(17,"button",11),m("click",function(){return e.submit()}),d(18,"mat-icon",12),a(19," Gerar PDF "),i(),o(20,"button",13),m("click",function(){return e.close()}),a(21,"Cancelar"),i()()),t&2&&(s(3),u("formGroup",e.form),s(5),u("value",null),s(2),S(e.months),s(7),u("disabled",e.form.invalid))},dependencies:[he,Z,Y,F,A,k,ye,T,R,H,Se,Me,Q,K,re,ne,oe,ie,De,V,N],styles:[".monthly-report-form[_ngcontent-%COMP%]{min-width:260px}.monthly-report-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:2.5rem;margin-top:1.75rem}.submit-button[_ngcontent-%COMP%]{border-radius:.625rem;background-color:#0b2454;font-weight:600}.cancel-button[_ngcontent-%COMP%]{color:#6b7280}"]})};var He=r=>[r,"BRL","symbol","1.2-2","pt-BR"],Ye=(r,n)=>n.id;function Ke(r,n){if(r&1){let t=y();o(0,"button",39),m("click",function(){b(t);let l=p();return x(l.openNewExpense())}),d(1,"mat-icon",40),a(2," Nova despesa "),i()}}function Qe(r,n){if(r&1&&(o(0,"option",16),a(1),i()),r&2){let t=n.$implicit;u("value",t.id),s(),C(t.description)}}function Xe(r,n){if(r&1){let t=y();o(0,"button",41),m("click",function(){b(t);let l=p();return x(l.getMonthlyReport())}),d(1,"mat-icon",42),a(2," Imprimir Relat\xF3rio de despesas do m\xEAs "),i()}}function Ze(r,n){if(r&1&&d(0,"mat-icon",33),r&2){let t=p();u("fontIcon",W(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function et(r,n){if(r&1&&d(0,"mat-icon",33),r&2){let t=p();u("fontIcon",W(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function tt(r,n){if(r&1&&d(0,"mat-icon",33),r&2){let t=p();u("fontIcon",W(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function nt(r,n){r&1&&(o(0,"th",34),a(1,"A\xE7\xF5es"),i())}function it(r,n){r&1&&(o(0,"tr")(1,"td",43),a(2," Nenhuma despesa encontrada. "),i()())}function ot(r,n){if(r&1){let t=y();o(0,"a",47),m("click",function(l){b(t);let c=p().$implicit;return p(2).downloadAttachment(c.attachmentUrl),x(l.preventDefault())}),d(1,"mat-icon",48),i()}}function rt(r,n){r&1&&(o(0,"span",46),a(1,"-"),i())}function at(r,n){if(r&1){let t=y();o(0,"td",34)(1,"button",49),m("click",function(){b(t);let l=p().$implicit,c=p(2);return x(c.editExpense(l))}),d(2,"mat-icon",50),i(),o(3,"button",51),m("click",function(){b(t);let l=p().$implicit,c=p(2);return x(c.deleteExpense(l.id))}),d(4,"mat-icon",52),i()()}}function lt(r,n){if(r&1&&(o(0,"tr")(1,"td",34),a(2),I(3,"date"),i(),o(4,"td",34),a(5),I(6,"currency"),i(),o(7,"td",34),a(8),i(),o(9,"td",34),a(10),i(),o(11,"td",44),g(12,ot,2,0,"a",45)(13,rt,2,0,"span",46),i(),o(14,"td",34),a(15),i(),g(16,at,5,0,"td",34),i()),r&2){let t=n.$implicit,e=p(2);s(2),C(_e(3,7,t.date,"shortDate","pt-BR")),s(3),P(" ",be(6,11,fe(17,He,e.utilsService.normalizeAmount(t.value)))," "),s(3),C(t.category.description),s(2),C(t.description),s(2),f(t.attachmentUrl?12:13),s(3),C(t.notes),s(),f((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?16:-1)}}function st(r,n){if(r&1&&M(0,lt,17,19,"tr",null,Ye),r&2){let t=p();S(t.expenses)}}function ct(r,n){if(r&1){let t=y();o(0,"li",54)(1,"button",57),m("click",function(){let l=b(t).$implicit,c=p(2);return x(c.goToPage(l))}),a(2),i()()}if(r&2){let t=n.$implicit,e=p(2);$("active",e.pageIndex===t),s(2),P(" ",t+1," ")}}function mt(r,n){if(r&1){let t=y();o(0,"nav",38)(1,"ul",53)(2,"li",54)(3,"button",55),m("click",function(){b(t);let l=p();return x(l.goToPage(l.pageIndex-1))}),a(4," Anterior "),i()(),M(5,ct,3,3,"li",56,ge),o(7,"li",54)(8,"button",55),m("click",function(){b(t);let l=p();return x(l.goToPage(l.pageIndex+1))}),a(9," Pr\xF3xima "),i()()()()}if(r&2){let t=p();s(2),$("disabled",t.pageIndex===0),s(),u("disabled",t.pageIndex===0),s(2),S(t.pages),s(2),$("disabled",t.pageIndex>=t.totalPages-1),s(),u("disabled",t.pageIndex>=t.totalPages-1)}}var $e=class r{expensesService=_(B);toastService=_(ee);dialog=_(ke);utilsService=_(ae);form;user=this.getUserFromLocalStorage();userRoles=we;categories$=this.expensesService.getCategories();expenses=[];totalExpenses=0;pageIndex=0;pageSize=10;sortBy="date";sortDirection="desc";startDate=null;endDate=null;categoryId=null;ngOnInit(){this.loadExpenses()}getUserFromLocalStorage(){let n=localStorage.getItem(v.APP_USER_KEY);return n?JSON.parse(n):null}loadExpenses(n=this.pageIndex,t=this.pageSize){let e=n+1;this.expensesService.getExpenses(this.startDate,this.endDate,this.categoryId,e,t,this.sortBy,this.sortDirection).pipe(j()).subscribe(l=>{if(!l){this.expenses=[],this.totalExpenses=0;return}this.expenses=l.data??[],this.totalExpenses=l.total??0,this.pageIndex=(l.page??e)-1,this.pageSize=l.limit??t})}openNewExpense(){this.dialog.open(U,{width:"720px",maxWidth:"95vw",autoFocus:!1}).afterClosed().subscribe(t=>{t&&this.loadExpenses()})}getMonthlyReport(){this.dialog.open(le,{width:"400px",autoFocus:!1}).afterClosed().subscribe(t=>{t&&this.expensesService.getMonthlyReport(t.month,t.year).pipe(j()).subscribe({next:e=>{let l=window.URL.createObjectURL(e),c=document.createElement("a");c.href=l,c.download=`relatorio-mensal-despesas-${t.month}-${t.year}.pdf`,c.click(),window.URL.revokeObjectURL(l)},error:e=>{this.toastService.error(e.error.error||"Erro desconhecido","Erro ao gerar relat\xF3rio mensal de despesas")}})})}get totalPages(){return this.pageSize>0?Math.ceil(this.totalExpenses/this.pageSize):0}get pages(){return Array.from({length:this.totalPages},(n,t)=>t)}goToPage(n){n<0||n>=this.totalPages||n===this.pageIndex||(this.pageIndex=n,this.loadExpenses(this.pageIndex,this.pageSize))}changeSort(n){this.sortBy===n?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=n,this.sortDirection="asc"),this.pageIndex=0,this.loadExpenses(0,this.pageSize)}editExpense(n){console.log(n),this.dialog.open(U,{width:"720px",maxWidth:"95vw",autoFocus:!1,data:n}).afterClosed().subscribe(e=>{e&&this.loadExpenses()})}deleteExpense(n){this.dialog.open(Fe,{width:"400px",data:{title:"Excluir Despesa",subtitle:"Tem certeza que deseja excluir esta despesa?",confirmLabel:"Excluir",cancelLabel:"Cancelar"}}).afterClosed().subscribe(e=>{e&&this.onDeleteExpense(n)})}onDeleteExpense(n){this.expensesService.deleteExpense(n).pipe(j()).subscribe({next:()=>{this.toastService.success("Despesa exclu\xEDda com sucesso."),this.loadExpenses()},error:t=>{this.toastService.error(t.error.error||"Erro desconhecido","Erro ao excluir a despesa")}})}limpar(){this.startDate=null,this.endDate=null,this.categoryId=null,this.loadExpenses()}async downloadAttachment(n){this.utilsService.downloadAttachment(n,"Comprovante de Despesa")}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=w({type:r,selectors:[["app-expenses"]],decls:77,vars:15,consts:[[1,"expenses","container-fluid","py-4"],[1,"row","align-items-center","mb-4"],[1,"col-12","col-lg"],[1,"h4","mb-1","fw-semibold"],[1,"text-muted","small","mb-0"],[1,"col-12","col-lg-auto"],["type","button",1,"btn","btn-primary","submit-button"],[1,"col-12","mb-4"],[1,"panel","h-100"],[1,"panel-title","mb-3","d-flex","align-items-center"],["fontIcon","filter_alt",1,"me-2"],[1,"row","mb-2"],[1,"col-12","col-lg","mb-3"],["for","categoryId",1,"form-label"],[1,"form-control",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"value"],[3,"value"],["for","startDate",1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["for","endDate",1,"form-label"],[1,"row","justify-content-between"],[1,"col-12","col-lg-4"],["type","button",1,"btn","btn-primary","submit-button","btn-print"],[1,"col-12","col-lg-4","text-end"],["type","button",1,"btn","cancel-button",3,"click"],["fontIcon","clear",1,"submit-icon"],["type","submit",1,"btn","btn-primary","submit-button",3,"click"],["fontIcon","search",1,"submit-icon"],[1,"panel-title","mb-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","align-middle","mb-0"],[1,"table-light"],[1,"sortable","text-center",3,"click"],[1,"sort-icon",3,"fontIcon"],[1,"text-center"],[1,"row"],[1,"col-12","col-lg-6"],[1,"me-5","mb-3","mt-4"],[1,"mt-3"],["type","button",1,"btn","btn-primary","submit-button",3,"click"],["fontIcon","add",1,"submit-icon"],["type","button",1,"btn","btn-primary","submit-button","btn-print",3,"click"],["fontIcon","print",1,"submit-icon"],["colspan","6",1,"text-center","text-muted","small","py-4"],[1,"d-flex","justify-content-center"],["href","#",1,"attachment-link"],[1,"text-muted","py-2"],["href","#",1,"attachment-link",3,"click"],["fontIcon","attach_file"],["aria-label","Editar Despesa",1,"rounded-button","me-1",3,"click"],["fontIcon","edit"],["aria-label","Excluir Despesa",1,"rounded-button",3,"click"],["fontIcon","delete"],[1,"pagination","justify-content-end","align-items-center","mb-0"],[1,"page-item"],["type","button",1,"page-link",3,"click","disabled"],[1,"page-item",3,"active"],["type","button",1,"page-link",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Despesas"),i(),o(5,"p",4),a(6,"Visualize e gerencie todas as despesas"),i()(),o(7,"div",5),g(8,Ke,3,0,"button",6),i()(),o(9,"div",7)(10,"mat-card",8)(11,"h2",9),d(12,"mat-icon",10),a(13," Filtros "),i(),o(14,"div",11)(15,"div",12)(16,"label",13),a(17,"Categoria"),i(),o(18,"select",14),L("ngModelChange",function(c){return G(e.categoryId,c)||(e.categoryId=c),c}),o(19,"option",15),a(20,"- Selecione"),i(),M(21,Qe,2,2,"option",16,D),I(23,"async"),i()(),o(24,"div",12)(25,"label",17),a(26,"Data inicial"),i(),o(27,"input",18),L("ngModelChange",function(c){return G(e.startDate,c)||(e.startDate=c),c}),i()(),o(28,"div",12)(29,"label",19),a(30,"Data Final"),i(),o(31,"input",18),L("ngModelChange",function(c){return G(e.endDate,c)||(e.endDate=c),c}),i()()(),o(32,"div",20)(33,"div",21),g(34,Xe,3,0,"button",22),i(),o(35,"div",23)(36,"button",24),m("click",function(){return e.limpar()}),d(37,"mat-icon",25),a(38," Limpar "),i(),o(39,"button",26),m("click",function(){return e.loadExpenses()}),d(40,"mat-icon",27),a(41," Pesquisar "),i()()()()(),o(42,"div",7)(43,"mat-card",8)(44,"h2",28),a(45,"Despesas"),i(),o(46,"div",29)(47,"table",30)(48,"thead",31)(49,"tr")(50,"th",32),m("click",function(){return e.changeSort("date")}),a(51," Data "),g(52,Ze,1,2,"mat-icon",33),i(),o(53,"th",32),m("click",function(){return e.changeSort("value")}),a(54," Valor "),g(55,et,1,2,"mat-icon",33),i(),o(56,"th",32),m("click",function(){return e.changeSort("categoryId")}),a(57," Categoria "),g(58,tt,1,2,"mat-icon",33),i(),o(59,"th",34),a(60,"Descri\xE7\xE3o"),i(),o(61,"th",34),a(62,"Anexo"),i(),o(63,"th",34),a(64,"Observa\xE7\xF5es"),i(),g(65,nt,2,0,"th",34),i()(),o(66,"tbody"),g(67,it,3,0,"tr")(68,st,2,0),i()()(),o(69,"div",35)(70,"div",36)(71,"p",37)(72,"strong"),a(73,"Total de despesas:"),i(),a(74),i()(),o(75,"div",36),g(76,mt,10,6,"nav",38),i()()()()()),t&2&&(s(8),f((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?8:-1),s(10),z("ngModel",e.categoryId),s(),u("value",null),s(2),S(q(23,13,e.categories$)),s(6),z("ngModel",e.startDate),s(4),z("ngModel",e.endDate),s(3),f((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?34:-1),s(18),f(e.sortBy==="date"?52:-1),s(3),f(e.sortBy==="value"?55:-1),s(3),f(e.sortBy==="categoryId"?58:-1),s(7),f((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?65:-1),s(2),f(e.expenses.length===0?67:68),s(7),P(" ",e.totalExpenses),s(2),f(e.totalPages>1?76:-1))},dependencies:[V,N,Te,Re,Pe,F,A,k,T,R,Ee,J,xe,Ce],styles:[".expenses[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-lowest)}.expenses[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{padding:1.25rem;border-radius:.625rem;box-shadow:0 1px 1px #0f172a0f;border:1px solid rgba(148,163,184,.25);background-color:#fff}.expenses[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:600}.expenses[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:2.5rem;margin-top:1.75rem}.expenses[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{border-radius:.625rem;background-color:#0b2454;font-weight:600}.expenses[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{color:#6b7280}.expenses[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]{border-radius:.625rem;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;color:#0b2454;text-decoration:none}.expenses[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]:hover{background-color:#facc15}.expenses[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;margin-left:.25rem;margin-top:.25rem}@media(max-width:762px){.btn-print[_ngcontent-%COMP%]{height:4rem!important;padding:1rem}}"]})};export{$e as ExpensesComponent};
