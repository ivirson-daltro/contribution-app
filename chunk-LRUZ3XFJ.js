import{a as kt}from"./chunk-Q3Y4OKLB.js";import{a as It,b as Et}from"./chunk-ACZGM75L.js";import{a as ot,b as wt,c as Pt,d as rt,e as at,f as lt,g as W}from"./chunk-K5NGYTRF.js";import{a as xt}from"./chunk-2J3QXTNU.js";import{c as A,e as S,f as B,g as J,h as Mt,i as K,j as Y,k as Q,l as X,m as Z,n as tt,o as et,p as St,q as nt}from"./chunk-XFPGHWFH.js";import{a as Dt}from"./chunk-JWX3UH7D.js";import{a as Tt,b as Ot}from"./chunk-OQ2EGD3G.js";import{a as V,b as $}from"./chunk-K6JHMUYJ.js";import{E as it}from"./chunk-UA6553JU.js";import{$b as st,Aa as z,Ab as M,Bb as P,D as b,Db as gt,Eb as Ct,Fa as O,O as pt,Ra as g,Sa as C,T as f,Ta as w,Ua as bt,Ub as H,Va as y,Vb as _t,Wa as v,Wb as ht,X as I,Xa as c,Xb as yt,Y as E,Ya as o,Za as i,_a as u,ac as vt,cb as D,eb as d,fb as p,gc as h,nb as q,pb as a,qb as _,rb as T,sb as k,tb as R,ub as N,va as m,wb as F,zb as ft}from"./chunk-BCEI6LD6.js";import{a as dt,b as ut}from"./chunk-7CGTOI24.js";var L=class r{httpClient=f(vt);getMembers(){return this.httpClient.get(`${h.apiUrl}/members`)}getContributionTypes(){return this.httpClient.get(`${h.apiUrl}/domain/contribution-types`)}getPaymentMethods(){return this.httpClient.get(`${h.apiUrl}/domain/payment-methods`)}getContributions(n,t,e,l=1,s=10,U,j="desc"){let x=new st().set("page",l.toString()).set("limit",s.toString());return U&&(x=x.set("sortBy",U).set("sortDirection",j)),n&&(x=x.set("memberId",n)),t&&(x=x.set("contributionTypeId",t)),e&&(x=x.set("paymentMethodId",e)),this.httpClient.get(`${h.apiUrl}/contributions/paginated`,{params:x})}saveContribution(n){return this.httpClient.post(`${h.apiUrl}/contributions`,n)}getContributionById(n){return this.httpClient.get(`${h.apiUrl}/contributions/${n}`)}updateContribution(n,t){return this.httpClient.put(`${h.apiUrl}/contributions/${n}`,t)}deleteContribution(n){return this.httpClient.delete(`${h.apiUrl}/contributions/${n}`)}getWeeklyReport(n,t){let e=new st().set("startDate",n).set("endDate",t);return this.httpClient.get(`${h.apiUrl}/contributions/weekly/report`,{params:e,responseType:"blob"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=pt({token:r,factory:r.\u0275fac,providedIn:"root"})};function Vt(r,n){if(r&1&&(o(0,"option",8),a(1),i()),r&2){let t=n.$implicit;c("value",t.id),m(),_(t.name)}}function $t(r,n){if(r&1&&(o(0,"option",8),a(1),i()),r&2){let t=n.$implicit;c("value",t.id),m(),_(t.description)}}function Wt(r,n){if(r&1&&(o(0,"option",8),a(1),i()),r&2){let t=n.$implicit;c("value",t.id),m(),_(t.type)}}var G=class r{constructor(n,t,e){this.fb=n;this.dialogRef=t;this.data=e}contributionsService=f(L);form;members$=this.contributionsService.getMembers();contributionTypes$=this.contributionsService.getContributionTypes();paymentMethods$=this.contributionsService.getPaymentMethods();contributionTypesCache=[];ngOnInit(){this.buildForm(),this.loadContributionTypes(),this.setupMemberValidation(),this.data&&Promise.all([this.members$.pipe(b()).toPromise(),this.contributionTypes$.pipe(b()).toPromise(),this.paymentMethods$.pipe(b()).toPromise()]).then(()=>{this.form.patchValue({memberId:this.data.memberId??"",contributionTypeId:this.data.contributionTypeId??"",paymentMethodId:this.data.paymentMethodId??"",amount:this.data.amount??"",date:this.data.date?this.data.date.substring(0,10):"",observation:this.data.observation??""}),this.formatAmount()})}buildForm(){this.form=this.fb.group({memberId:["",S.required],contributionTypeId:["",S.required],paymentMethodId:["",S.required],amount:["",[S.required]],date:["",S.required],observation:[""]})}submit(){this.saveContribution()}saveContribution(){let n=this.form.getRawValue(),t=this.parseAmount(n.amount),e=ut(dt({},n),{amount:t});this.data&&this.data.id?this.contributionsService.updateContribution(this.data.id,e).pipe(b()).subscribe({next:()=>{this.dialogRef.close(!0)},error:l=>{console.error("Error updating contribution:",l)}}):this.contributionsService.saveContribution(e).pipe(b()).subscribe({next:()=>{this.dialogRef.close(!0)},error:l=>{console.error("Error saving contribution:",l)}})}formatAmount(){let n=this.form.get("amount");if(!n)return;let t=this.formatCurrency(n.value);t&&n.setValue(t,{emitEvent:!1})}parseAmount(n){let t=this.toNumber(n);return Number.isNaN(t)?0:t}formatCurrency(n){let t=this.toNumber(n);return Number.isNaN(t)?"":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}loadContributionTypes(){this.contributionTypes$.pipe(b()).subscribe(n=>{this.contributionTypesCache=n??[]})}setupMemberValidation(){let n=this.form.get("memberId"),t=this.form.get("contributionTypeId");!n||!t||t.valueChanges.subscribe(e=>{this.isOfertaType(e)?n.clearValidators():n.setValidators([S.required]),n.updateValueAndValidity()})}isOfertaType(n){if(!n)return!1;let t=this.contributionTypesCache.find(e=>e.id===n);return!!t&&t.description?.toLowerCase()==="oferta"}toNumber(n){if(n==null)return NaN;let t=String(n).trim();if(!t)return NaN;if(t=t.replace(/R\$/g,"").replace(/\s/g,""),t.includes(","))return t=t.replace(/\./g,"").replace(",","."),Number(t);let e=t.replace(/\D/g,"");if(!e)return NaN;if(e.length<=2)return Number(e);let l=e.slice(0,e.length-2),s=e.slice(-2);return+`${l}.${s}`}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||r)(z(et),z(ot),z(wt))};static \u0275cmp=O({type:r,selectors:[["app-add-contributions"]],decls:55,vars:10,consts:[[1,"cadastrar-container"],[1,"cadastrar-card"],["mat-dialog-title","",1,"card-title"],[1,"contribution-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","memberId",1,"form-label"],["formControlName","memberId",1,"form-control"],["value","","disabled","","selected",""],[3,"value"],[1,"row"],[1,"col-lg-6"],["for","contributionTypeId",1,"form-label"],["formControlName","contributionTypeId",1,"form-control"],["for","paymentMethodId",1,"form-label"],["formControlName","paymentMethodId",1,"form-control"],["for","amount",1,"form-label"],["type","text","formControlName","amount","placeholder","R$ 0,00",1,"form-control",3,"blur"],["for","date",1,"form-label"],["type","date","formControlName","date","placeholder","Digite a data",1,"form-control"],["for","observation",1,"form-label"],["formControlName","observation",1,"form-control"],["align","end",1,"form-footer"],["type","button",1,"btn","cancel-button",3,"click"],["type","submit",1,"btn","btn-primary","submit-button",3,"disabled"],["fontIcon","save",1,"submit-icon"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),a(3),i(),o(4,"form",3),d("ngSubmit",function(){return e.submit()}),o(5,"mat-dialog-content")(6,"div",4)(7,"label",5),a(8,"Membro"),i(),o(9,"select",6)(10,"option",7),a(11,"- Selecione"),i(),y(12,Vt,2,2,"option",8,w),M(14,"async"),i()(),o(15,"div",4)(16,"div",9)(17,"div",10)(18,"label",11),a(19,"Tipo de Contribui\xE7\xE3o"),i(),o(20,"select",12)(21,"option",7),a(22,"- Selecione"),i(),y(23,$t,2,2,"option",8,w),M(25,"async"),i()(),o(26,"div",10)(27,"label",13),a(28,"Forma de Pagamento"),i(),o(29,"select",14)(30,"option",7),a(31,"- Selecione"),i(),y(32,Wt,2,2,"option",8,w),M(34,"async"),i()()()(),o(35,"div",4)(36,"div",9)(37,"div",10)(38,"label",15),a(39,"Valor"),i(),o(40,"input",16),d("blur",function(){return e.formatAmount()}),i()(),o(41,"div",10)(42,"label",17),a(43,"Data"),i(),u(44,"input",18),i()()(),o(45,"div",4)(46,"label",19),a(47,"Observa\xE7\xF5es"),i(),u(48,"textarea",20),i()(),o(49,"mat-dialog-actions",21)(50,"button",22),d("click",function(){return e.close()}),a(51,"Cancelar"),i(),o(52,"button",23),u(53,"mat-icon",24),a(54),i()()()()()),t&2&&(m(3),T("",e.data?"Editar":"Nova"," Contribui\xE7\xE3o"),m(),c("formGroup",e.form),m(8),v(P(14,4,e.members$)),m(11),v(P(25,6,e.contributionTypes$)),m(9),v(P(34,8,e.paymentMethods$)),m(20),c("disabled",e.form.invalid),m(2),T(" ",e.data?"Editar":"Registrar"," Contribui\xE7\xE3o "))},dependencies:[nt,K,Z,tt,A,X,B,J,Q,Y,W,rt,lt,at,$,V,H],styles:[".cadastrar-container[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:700;color:#0b2454}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]{padding-top:.25rem}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:600;margin-bottom:.35rem;color:#374151}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#f7f9fc;border-radius:.75rem}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#d1d5db}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#1d4ed8}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #e5e7eb;display:flex;gap:1rem;align-items:center}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{color:#6b7280}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:3rem;border-radius:.625rem;background-color:#0b2454;font-weight:600}@media(max-width:600px){.cadastrar-card[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1.75rem}}"]})};var mt=class r{dialogRef=f(ot);fb=f(et);form=this.fb.group({startDate:["",S.required],endDate:["",S.required]});close(){this.dialogRef.close()}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.dialogRef.close(this.form.value)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=O({type:r,selectors:[["app-weekly-report-dialog"]],decls:18,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"weekly-report-form",3,"formGroup"],[1,"mb-3"],["for","startDate",1,"form-label"],["id","startDate","type","date","formControlName","startDate",1,"form-control"],["for","endDate",1,"form-label"],["id","endDate","type","date","formControlName","endDate",1,"form-control"],["mat-dialog-actions","",1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-primary","submit-button",3,"click","disabled"],["fontIcon","download",1,"submit-icon"],["type","button",1,"btn","cancel-button",3,"click"]],template:function(t,e){t&1&&(o(0,"h2",0),a(1,"Relat\xF3rio semanal"),i(),o(2,"div",1)(3,"form",2)(4,"div",3)(5,"label",4),a(6,"Data inicial"),i(),u(7,"input",5),i(),o(8,"div",3)(9,"label",6),a(10,"Data final"),i(),u(11,"input",7),i()()(),o(12,"div",8)(13,"button",9),d("click",function(){return e.submit()}),u(14,"mat-icon",10),a(15," Gerar PDF "),i(),o(16,"button",11),d("click",function(){return e.close()}),a(17,"Cancelar"),i()()),t&2&&(m(3),c("formGroup",e.form),m(10),c("disabled",e.form.invalid))},dependencies:[yt,nt,K,A,B,J,Q,Y,W,rt,lt,at,it,$,V],styles:[".weekly-report-form[_ngcontent-%COMP%]{min-width:260px}.weekly-report-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:2.5rem;margin-top:1.75rem}.submit-button[_ngcontent-%COMP%]{border-radius:.625rem;background-color:#0b2454;font-weight:600}.cancel-button[_ngcontent-%COMP%]{color:#6b7280}"]})};var Lt=r=>[r,"BRL","symbol","1.2-2","pt-BR"],Ut=(r,n)=>n.id;function jt(r,n){if(r&1){let t=D();o(0,"button",41),d("click",function(){I(t);let l=p();return E(l.openNewContribution())}),u(1,"mat-icon",42),a(2," Nova contribui\xE7\xE3o "),i()}}function Gt(r,n){if(r&1&&(o(0,"option",16),a(1),i()),r&2){let t=n.$implicit;c("value",t.id),m(),_(t.name)}}function zt(r,n){if(r&1&&(o(0,"option",16),a(1),i()),r&2){let t=n.$implicit;c("value",t.id),m(),_(t.description)}}function qt(r,n){if(r&1&&(o(0,"option",16),a(1),i()),r&2){let t=n.$implicit;c("value",t.id),m(),_(t.type)}}function Ht(r,n){if(r&1){let t=D();o(0,"button",43),d("click",function(){I(t);let l=p();return E(l.getWeeklyReport())}),u(1,"mat-icon",44),a(2," Imprimir Relat\xF3rio da semana "),i()}}function Jt(r,n){if(r&1&&u(0,"mat-icon",35),r&2){let t=p();c("fontIcon",F(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function Kt(r,n){if(r&1&&u(0,"mat-icon",35),r&2){let t=p();c("fontIcon",F(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function Yt(r,n){if(r&1&&u(0,"mat-icon",35),r&2){let t=p();c("fontIcon",F(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function Qt(r,n){if(r&1&&u(0,"mat-icon",35),r&2){let t=p();c("fontIcon",F(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function Xt(r,n){if(r&1&&u(0,"mat-icon",35),r&2){let t=p();c("fontIcon",F(t.sortDirection==="asc"?"arrow_upward":"arrow_downward"))}}function Zt(r,n){r&1&&(o(0,"th",36),a(1,"A\xE7\xF5es"),i())}function te(r,n){r&1&&(o(0,"tr")(1,"td",45),a(2," Nenhuma contribui\xE7\xE3o encontrada. "),i()())}function ee(r,n){if(r&1){let t=D();o(0,"td",36)(1,"button",46),d("click",function(){I(t);let l=p().$implicit,s=p(2);return E(s.editContribution(l.id))}),u(2,"mat-icon",47),i(),o(3,"button",48),d("click",function(){I(t);let l=p().$implicit,s=p(2);return E(s.deleteContribution(l.id))}),u(4,"mat-icon",49),i()()}}function ne(r,n){if(r&1&&(o(0,"tr")(1,"td"),a(2),M(3,"date"),i(),o(4,"td"),a(5),i(),o(6,"td"),a(7),i(),o(8,"td"),a(9),i(),o(10,"td"),a(11),M(12,"currency"),i(),g(13,ee,5,0,"td",36),i()),r&2){let t=n.$implicit,e=p(2);m(2),_(gt(3,6,t.date,"shortDate","pt-BR")),m(3),_((t.member==null?null:t.member.name)??"-"),m(2),_(t.contributionType.description),m(2),_(t.paymentMethod.type),m(2),T(" ",Ct(12,10,ft(16,Lt,e.normalizeAmount(t.amount)))," "),m(2),C((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?13:-1)}}function ie(r,n){if(r&1&&y(0,ne,14,18,"tr",null,Ut),r&2){let t=p();v(t.contributions)}}function oe(r,n){if(r&1){let t=D();o(0,"li",51)(1,"button",54),d("click",function(){let l=I(t).$implicit,s=p(2);return E(s.goToPage(l))}),a(2),i()()}if(r&2){let t=n.$implicit,e=p(2);q("active",e.pageIndex===t),m(2),T(" ",t+1," ")}}function re(r,n){if(r&1){let t=D();o(0,"nav",40)(1,"ul",50)(2,"li",51)(3,"button",52),d("click",function(){I(t);let l=p();return E(l.goToPage(l.pageIndex-1))}),a(4," Anterior "),i()(),y(5,oe,3,3,"li",53,bt),o(7,"li",51)(8,"button",52),d("click",function(){I(t);let l=p();return E(l.goToPage(l.pageIndex+1))}),a(9," Pr\xF3xima "),i()()()()}if(r&2){let t=p();m(2),q("disabled",t.pageIndex===0),m(),c("disabled",t.pageIndex===0),m(2),v(t.pages),m(2),q("disabled",t.pageIndex>=t.totalPages-1),m(),c("disabled",t.pageIndex>=t.totalPages-1)}}var At=class r{dashboardService=f(Dt);contributionsService=f(L);dialog=f(Pt);toastService=f(Et);form;user=this.getUserFromLocalStorage();userRoles=xt;members$=this.contributionsService.getMembers();contributionTypes$=this.contributionsService.getContributionTypes();paymentMethods$=this.contributionsService.getPaymentMethods();contributions=[];totalContributions=0;pageIndex=0;pageSize=10;sortBy="date";sortDirection="desc";memberId=null;contributionTypeId=null;paymentMethodId=null;startDate=null;endDate=null;ngOnInit(){this.getContributionList()}getUserFromLocalStorage(){let n=localStorage.getItem(h.APP_USER_KEY);return n?JSON.parse(n):null}openNewContribution(){this.dialog.open(G,{width:"720px",maxWidth:"95vw",autoFocus:!1}).afterClosed().subscribe(t=>{t&&this.getContributionList()})}getContributionList(n=this.pageIndex,t=this.pageSize){let e=n+1;this.contributionsService.getContributions(this.memberId,this.contributionTypeId,this.paymentMethodId,e,t,this.sortBy,this.sortDirection).pipe(b()).subscribe(l=>{if(!l){this.contributions=[],this.totalContributions=0;return}this.contributions=l.data??[],this.totalContributions=l.total??0,this.pageIndex=(l.page??e)-1,this.pageSize=l.limit??t})}get totalPages(){return this.pageSize>0?Math.ceil(this.totalContributions/this.pageSize):0}get pages(){return Array.from({length:this.totalPages},(n,t)=>t)}goToPage(n){n<0||n>=this.totalPages||n===this.pageIndex||(this.pageIndex=n,this.getContributionList(this.pageIndex,this.pageSize))}changeSort(n){this.sortBy===n?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=n,this.sortDirection="asc"),this.pageIndex=0,this.getContributionList(0,this.pageSize)}limpar(){this.memberId=null,this.contributionTypeId=null,this.paymentMethodId=null,this.getContributionList(0,this.pageSize)}normalizeAmount(n){if(n==null)return 0;let t=String(n).trim();if(!t)return 0;t=t.replace(/R\$/g,"").replace(/\s/g,""),t.includes(",")&&(t=t.replace(/\./g,"").replace(",","."));let e=Number(t);return Number.isNaN(e)?0:e}getWeeklyReport(){this.dialog.open(mt,{width:"400px",autoFocus:!1}).afterClosed().pipe(b()).subscribe(t=>{if(!t)return;let{startDate:e,endDate:l}=t;if(!e||!l){this.toastService.warning("Informe a data inicial e final para o relat\xF3rio.");return}this.contributionsService.getWeeklyReport(e,l).pipe(b()).subscribe({next:s=>{let U=window.URL.createObjectURL(s),j=document.createElement("a");j.href=U,j.download=`relatorio-semanal-${e}-a-${l}.pdf`,j.click(),window.URL.revokeObjectURL(U)},error:s=>{this.toastService.error(s.error.error||"Erro desconhecido","Erro ao gerar relat\xF3rio semanal")}})})}editContribution(n){this.contributionsService.getContributionById(n).pipe(b()).subscribe({next:t=>{this.dialog.open(G,{width:"720px",maxWidth:"95vw",autoFocus:!1,data:t}).afterClosed().subscribe(l=>{l&&this.getContributionList()})},error:t=>{this.toastService.error(t.error.error||"Erro desconhecido","Erro ao buscar dados da contribui\xE7\xE3o")}})}deleteContribution(n){this.dialog.open(kt,{width:"400px",data:{title:"Excluir Contribui\xE7\xE3o",subtitle:"Tem certeza que deseja excluir esta contribui\xE7\xE3o?",confirmLabel:"Excluir",cancelLabel:"Cancelar"}}).afterClosed().subscribe(e=>{e&&this.onDeleteContribution(n)})}onDeleteContribution(n){this.contributionsService.deleteContribution(n).pipe(b()).subscribe({next:()=>{this.toastService.success("Contribui\xE7\xE3o exclu\xEDda com sucesso."),this.getContributionList()},error:t=>{this.toastService.error(t.error.error||"Erro desconhecido","Erro ao excluir a contribui\xE7\xE3o")}})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=O({type:r,selectors:[["app-contributions"]],decls:95,vars:25,consts:[[1,"contributions","container-fluid","py-4"],[1,"row","align-items-center","mb-4"],[1,"col-12","col-lg"],[1,"h4","mb-1","fw-semibold"],[1,"text-muted","small","mb-0"],[1,"col-12","col-lg-auto"],["type","button",1,"btn","btn-primary","submit-button"],[1,"col-12","mb-4"],[1,"panel","h-100"],[1,"panel-title","mb-3","d-flex","align-items-center"],["fontIcon","filter_alt",1,"me-2"],[1,"row","mb-2"],[1,"col-12","col-lg","mb-3"],["for","memberId",1,"form-label"],[1,"form-control",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"value"],[3,"value"],["for","contributionTypeId",1,"form-label"],["for","paymentMethodId",1,"form-label"],["for","startDate",1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["for","endDate",1,"form-label"],[1,"row","justify-content-between"],[1,"col-12","col-lg-4"],["type","button",1,"btn","btn-primary","submit-button","btn-print"],[1,"col-12","col-lg-4","text-end"],["type","button",1,"btn","cancel-button",3,"click"],["fontIcon","clear",1,"submit-icon"],["type","submit",1,"btn","btn-primary","submit-button",3,"click"],["fontIcon","search",1,"submit-icon"],[1,"panel-title","mb-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","align-middle","mb-0"],[1,"table-light"],[1,"sortable",3,"click"],[1,"sort-icon",3,"fontIcon"],[1,"text-center"],[1,"row"],[1,"col-12","col-lg-6"],[1,"me-5","mb-3","mt-4"],[1,"mt-3"],["type","button",1,"btn","btn-primary","submit-button",3,"click"],["fontIcon","add",1,"submit-icon"],["type","button",1,"btn","btn-primary","submit-button","btn-print",3,"click"],["fontIcon","print",1,"submit-icon"],["colspan","6",1,"text-center","text-muted","small","py-4"],["aria-label","Editar Contribui\xE7\xE3o",1,"rounded-button","me-1",3,"click"],["fontIcon","edit"],["aria-label","Excluir Contribui\xE7\xE3o",1,"rounded-button",3,"click"],["fontIcon","delete"],[1,"pagination","justify-content-end","align-items-center","mb-0"],[1,"page-item"],["type","button",1,"page-link",3,"click","disabled"],[1,"page-item",3,"active"],["type","button",1,"page-link",3,"click"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Contribui\xE7\xF5es"),i(),o(5,"p",4),a(6,"Visualize e gerencie todas as contribui\xE7\xF5es"),i()(),o(7,"div",5),g(8,jt,3,0,"button",6),i()(),o(9,"div",7)(10,"mat-card",8)(11,"h2",9),u(12,"mat-icon",10),a(13," Filtros "),i(),o(14,"div",11)(15,"div",12)(16,"label",13),a(17,"Membro"),i(),o(18,"select",14),N("ngModelChange",function(s){return R(e.memberId,s)||(e.memberId=s),s}),o(19,"option",15),a(20,"- Selecione"),i(),y(21,Gt,2,2,"option",16,w),M(23,"async"),i()(),o(24,"div",12)(25,"label",17),a(26,"Tipo"),i(),o(27,"select",14),N("ngModelChange",function(s){return R(e.contributionTypeId,s)||(e.contributionTypeId=s),s}),o(28,"option",15),a(29,"- Selecione"),i(),y(30,zt,2,2,"option",16,w),M(32,"async"),i()(),o(33,"div",12)(34,"label",18),a(35,"Pagamento"),i(),o(36,"select",14),N("ngModelChange",function(s){return R(e.paymentMethodId,s)||(e.paymentMethodId=s),s}),o(37,"option",15),a(38,"- Selecione"),i(),y(39,qt,2,2,"option",16,w),M(41,"async"),i()(),o(42,"div",12)(43,"label",19),a(44,"Data inicial"),i(),o(45,"input",20),N("ngModelChange",function(s){return R(e.startDate,s)||(e.startDate=s),s}),i()(),o(46,"div",12)(47,"label",21),a(48,"Data Final"),i(),o(49,"input",20),N("ngModelChange",function(s){return R(e.endDate,s)||(e.endDate=s),s}),i()()(),o(50,"div",22)(51,"div",23),g(52,Ht,3,0,"button",24),i(),o(53,"div",25)(54,"button",26),d("click",function(){return e.limpar()}),u(55,"mat-icon",27),a(56," Limpar "),i(),o(57,"button",28),d("click",function(){return e.getContributionList()}),u(58,"mat-icon",29),a(59," Pesquisar "),i()()()()(),o(60,"div",7)(61,"mat-card",8)(62,"h2",30),a(63,"Contribui\xE7\xF5es"),i(),o(64,"div",31)(65,"table",32)(66,"thead",33)(67,"tr")(68,"th",34),d("click",function(){return e.changeSort("date")}),a(69," Data "),g(70,Jt,1,2,"mat-icon",35),i(),o(71,"th",34),d("click",function(){return e.changeSort("memberId")}),a(72," Membro "),g(73,Kt,1,2,"mat-icon",35),i(),o(74,"th",34),d("click",function(){return e.changeSort("contributionTypeId")}),a(75," Tipo "),g(76,Yt,1,2,"mat-icon",35),i(),o(77,"th",34),d("click",function(){return e.changeSort("paymentMethodId")}),a(78," Pagamento "),g(79,Qt,1,2,"mat-icon",35),i(),o(80,"th",34),d("click",function(){return e.changeSort("amount")}),a(81," Valor "),g(82,Xt,1,2,"mat-icon",35),i(),g(83,Zt,2,0,"th",36),i()(),o(84,"tbody"),g(85,te,3,0,"tr")(86,ie,2,0),i()()(),o(87,"div",37)(88,"div",38)(89,"p",39)(90,"strong"),a(91,"Total de contribui\xE7\xF5es:"),i(),a(92),i()(),o(93,"div",38),g(94,re,10,6,"nav",40),i()()()()()),t&2&&(m(8),C((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?8:-1),m(10),k("ngModel",e.memberId),m(),c("value",null),m(2),v(P(23,19,e.members$)),m(6),k("ngModel",e.contributionTypeId),m(),c("value",null),m(2),v(P(32,21,e.contributionTypes$)),m(6),k("ngModel",e.paymentMethodId),m(),c("value",null),m(2),v(P(41,23,e.paymentMethods$)),m(6),k("ngModel",e.startDate),m(4),k("ngModel",e.endDate),m(3),C((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?52:-1),m(18),C(e.sortBy==="date"?70:-1),m(3),C(e.sortBy==="memberId"?73:-1),m(3),C(e.sortBy==="contributionTypeId"?76:-1),m(3),C(e.sortBy==="paymentMethodId"?79:-1),m(3),C(e.sortBy==="amount"?82:-1),m(),C((e.user==null?null:e.user.role)===e.userRoles.ADMIN||(e.user==null?null:e.user.role)===e.userRoles.TREASURER?83:-1),m(2),C(e.contributions.length===0?85:86),m(7),T(" ",e.totalContributions," "),m(2),C(e.totalPages>1?94:-1))},dependencies:[Ot,Tt,it,$,V,W,It,St,Z,tt,A,X,B,Mt,H,_t,ht],styles:[".contributions[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-lowest)}.contributions[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{padding:1.25rem;border-radius:.625rem;box-shadow:0 1px 1px #0f172a0f;border:1px solid rgba(148,163,184,.25);background-color:#fff}.contributions[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:600}.contributions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:2.5rem;margin-top:1.75rem}.contributions[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{border-radius:.625rem;background-color:#0b2454;font-weight:600}.contributions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{color:#6b7280}@media(max-width:762px){.btn-print[_ngcontent-%COMP%]{height:4rem!important;padding:1rem}}"]})};export{At as ContributionsComponent};
