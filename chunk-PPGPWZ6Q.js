import{b as A}from"./chunk-VZNXFT7U.js";import{c as _,e as m,g as S,h as y,l as O,n as x,o as E,s as R,u as F}from"./chunk-GFUDPGUP.js";import{a as P,c as M,h as k}from"./chunk-2F2UWFXG.js";import{a as V,b as N}from"./chunk-7WCVQ4OW.js";import"./chunk-QK5Q5MQS.js";import{E as f,Ia as h,W as a,Wa as g,Xa as b,ab as u,bb as o,cb as t,db as s,jb as v,jc as C,wb as w,ya as d,yb as n}from"./chunk-3U63YFDR.js";import"./chunk-7CGTOI24.js";function T(c,i){c&1&&(o(0,"div",14),n(1,"As senhas n\xE3o coincidem."),t())}var I=class c{fb=a(R);router=a(M);route=a(P);authService=a(k);toastService=a(A);form;ngOnInit(){this.buildForm()}buildForm(){this.form=this.fb.group({email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],confirmPassword:["",[m.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator=i=>{let r=i.get("password"),e=i.get("confirmPassword");return r&&e&&r.value!==e.value?{passwordMismatch:!0}:null};getTokenFromRoute(){return this.route.snapshot.params.token||""}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let{password:i,confirmPassword:r}=this.form.getRawValue(),e=this.getTokenFromRoute();this.authService.resetPassword(e,i).pipe(f()).subscribe({next:()=>{this.toastService.success("Senha resetada com sucesso. Voc\xEA j\xE1 pode fazer login com a nova senha."),this.router.navigate(["/auth/login"])},error:l=>{this.toastService.error(l.error.error||"Erro desconhecido","Erro ao resetar senha")}})}static \u0275fac=function(r){return new(r||c)};static \u0275cmp=h({type:c,selectors:[["app-reset-password"]],decls:26,vars:5,consts:[[1,"auth-page","d-flex","align-items-center","justify-content-center"],[1,"auth-card"],[1,"auth-icon-wrapper"],["src","images/logo.png","alt","Logo da igreja"],[1,"auth-title"],[1,"auth-subtitle"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","email","placeholder","seu@email.com","formControlName","email",1,"form-control"],[1,"row","mb-3"],[1,"col-12","col-md-6"],["type","password","placeholder","M\xEDnimo 6 caracteres","formControlName","password",1,"form-control"],["type","password","placeholder","Repita a senha","formControlName","confirmPassword",1,"form-control"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-primary","auth-submit-btn","w-100",3,"disabled"],["fontIcon","lock_reset",1,"me-2"]],template:function(r,e){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),s(3,"img",3),t(),o(4,"h1",4),n(5,"Redefinir Senha"),t(),o(6,"p",5),n(7,"Crie uma nova senha para acessar o sistema"),t(),o(8,"form",6),v("ngSubmit",function(){return e.submit()}),o(9,"div",7)(10,"label",8),n(11,"Email"),t(),s(12,"input",9),t(),o(13,"div",10)(14,"div",11)(15,"label",8),n(16,"Senha"),t(),s(17,"input",12),t(),o(18,"div",11)(19,"label",8),n(20,"Confirmar Senha"),t(),s(21,"input",13),g(22,T,2,0,"div",14),t()(),o(23,"button",15),s(24,"mat-icon",16),n(25," Redefinir Senha "),t()()()()),r&2){let l,p;d(8),u("formGroup",e.form),d(13),w("is-invalid",(e.form.errors==null?null:e.form.errors.passwordMismatch)&&((l=e.form.get("confirmPassword"))==null?null:l.touched)),d(),b(e.form.errors!=null&&e.form.errors.passwordMismatch&&((p=e.form.get("confirmPassword"))!=null&&p.touched)?22:-1),d(),u("disabled",e.form.invalid)}},dependencies:[C,F,O,_,S,y,E,x,N,V],styles:[".auth-page[_ngcontent-%COMP%]{min-height:100vh;background:radial-gradient(circle at top left,#e5edf9 0,#f3f4f6 45%,#fff);padding:2rem 1rem}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:460px;background-color:#fff;border-radius:1.25rem;box-shadow:0 18px 45px #0f172a1f;padding:2.25rem 2.5rem 2.5rem}.auth-icon-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}.auth-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:1.35rem;font-weight:700;color:#0b2454;margin-bottom:.25rem}.auth-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#6b7280;margin-bottom:1.75rem}.auth-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#374151}.auth-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.75rem;border-color:#d1d5db;padding:.65rem .9rem}.auth-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#1d4ed8;box-shadow:0 0 0 1px #2563eb40}.auth-submit-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;height:2.9rem;border-radius:.625rem;background-color:#0b2454;border-color:#0b2454;font-weight:600}.auth-submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7}a[_ngcontent-%COMP%]{text-decoration:none}@media(max-width:576px){.auth-card[_ngcontent-%COMP%]{padding:1.75rem 1.5rem 2rem}}"]})};export{I as ResetPasswordComponent};
