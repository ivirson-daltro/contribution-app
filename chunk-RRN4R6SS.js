import{a as H}from"./chunk-KRHYTJSD.js";import{b as k}from"./chunk-AUBPLCKN.js";import{b as G}from"./chunk-22VHZYS6.js";import{a as V,b as j,d as Z,e as $,f as q,g as L}from"./chunk-LJVE3DC3.js";import{c as E,e as b,g as S,h as D,l as x,n as T,o as N,p as A,q as I,r as F,s as z,u as w}from"./chunk-MUXJUY4Y.js";import{a as R,b as B}from"./chunk-ATKN46PQ.js";import{$a as h,Ab as _,Bb as u,Da as c,E as p,Ia as C,Lb as O,Mb as y,W as f,Za as M,ab as v,bb as l,cb as t,db as e,eb as a,jc as P,kb as s,ya as m,zb as n}from"./chunk-2AFPZVH2.js";function Q(d,o){if(d&1&&(t(0,"option",12),n(1),e()),d&2){let i=o.$implicit;l("value",i.id),m(),_(i.description)}}var J=class d{constructor(o,i,r){this.fb=o;this.dialogRef=i;this.data=r}membersService=f(H);toastService=f(G);form;memberTypes$=this.membersService.getMemberTypes();ngOnInit(){if(this.buildForm(),this.data){let o={id:this.data.id??"",name:this.data.name??"",memberTypeId:this.data.memberTypeId??null,memberType:this.data.memberType??null,phone:this.data.phone??void 0,email:this.data.email??void 0,genre:this.data.genre??void 0,birthDate:this.data.birthDate??void 0,entryDate:this.data.entryDate??void 0,baptismDate:this.data.baptismDate??void 0,zipCode:this.data.zipCode??void 0,street:this.data.street??void 0,number:this.data.number??void 0,complement:this.data.complement??void 0,city:this.data.city??void 0,state:this.data.state??void 0};this.data.memberType&&this.data.memberType.id&&(o.memberTypeId=this.data.memberType.id),this.form.patchValue(o)}}buildForm(){this.form=this.fb.group({name:[null,b.required],memberTypeId:[null,b.required],phone:[null],email:[null],genre:[null],birthDate:[null],entryDate:[null],baptismDate:[null],zipCode:[null],street:[null],number:[null],complement:[null],city:[null],state:[null]})}submit(){let o=this.form.getRawValue();this.data&&this.data.id?this.updateMember(this.data.id,o):this.saveMember(o)}saveMember(o){this.membersService.saveMember(o).pipe(p()).subscribe({next:()=>{this.dialogRef.close(!0),this.toastService.success("Membro cadastrado com sucesso.")},error:i=>{this.toastService.error(i?.error?.error??"Erro ao cadastrar membro.")}})}updateMember(o,i){this.membersService.updateMember(o,i).pipe(p()).subscribe({next:()=>{this.dialogRef.close(!0),this.toastService.success("Membro atualizado com sucesso.")},error:r=>{this.toastService.error(r?.error?.error??"Erro ao atualizar membro.")}})}onZipCodeChange(o){let r=o.target.value;r&&r.length===9&&this.getAddressByZipCode(r)}getAddressByZipCode(o){this.membersService.getAddressByZipCode(o).subscribe({next:i=>{this.form.patchValue({street:i.logradouro,complement:i.complemento,city:i.localidade,state:i.uf})},error:()=>{this.toastService.warning("Endere\xE7o n\xE3o encontrado para o CEP informado.")}})}close(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||d)(c(z),c(V),c(j))};static \u0275cmp=C({type:d,selectors:[["app-add-members"]],decls:95,vars:8,consts:[[1,"cadastrar-container"],[1,"cadastrar-card"],["mat-dialog-title","",1,"card-title"],[1,"contribution-form",3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-12","col-lg-8"],["for","name",1,"form-label"],["formControlName","name","placeholder","Digite o nome",1,"form-control"],[1,"col-12","col-lg-4"],["for","memberTypeId",1,"form-label"],["formControlName","memberTypeId",1,"form-control"],["disabled","","selected","",3,"value"],[3,"value"],["for","phone",1,"form-label"],["formControlName","phone","placeholder","Digite o telefone","mask","(00) 0 0000-0000",1,"form-control"],["for","email",1,"form-label"],["formControlName","email","placeholder","Digite o e-mail",1,"form-control"],["for","genre",1,"form-label"],["formControlName","genre",1,"form-control"],["value","Masculino"],["value","Feminino"],["for","birthDate",1,"form-label"],["type","date","formControlName","birthDate",1,"form-control"],["for","entryDate",1,"form-label"],["type","date","formControlName","entryDate",1,"form-control"],["for","baptismDate",1,"form-label"],["type","date","formControlName","baptismDate",1,"form-control"],[1,"col-12","col-lg-3"],["for","zipCode",1,"form-label"],["formControlName","zipCode","placeholder","Digite o CEP","mask","00000-000",1,"form-control",3,"change"],[1,"col-12","col-lg-6"],["for","street",1,"form-label"],["formControlName","street","placeholder","Digite a rua",1,"form-control"],["for","number",1,"form-label"],["formControlName","number","placeholder","Digite o n\xFAmero",1,"form-control"],[1,"col-12"],["for","complement",1,"form-label"],["formControlName","complement","placeholder","Digite o complemento",1,"form-control"],["for","city",1,"form-label"],["formControlName","city","placeholder","Digite a cidade",1,"form-control"],["for","state",1,"form-label"],["formControlName","state","placeholder","Digite o estado",1,"form-control"],["align","end",1,"form-footer"],["type","button",1,"btn","cancel-button",3,"click"],["type","submit",1,"btn","btn-primary","submit-button",3,"disabled"],["fontIcon","save",1,"submit-icon"]],template:function(i,r){i&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),n(3),e(),t(4,"form",3),s("ngSubmit",function(){return r.submit()}),t(5,"mat-dialog-content")(6,"fieldset")(7,"legend"),n(8,"Informa\xE7\xF5es Pessoais"),e(),t(9,"div",4)(10,"div",5)(11,"label",6),n(12,"Nome"),e(),a(13,"input",7),e(),t(14,"div",8)(15,"label",9),n(16,"Tipo de Membro"),e(),t(17,"select",10)(18,"option",11),n(19,"- Selecione"),e(),h(20,Q,2,2,"option",12,M),O(22,"async"),e()()(),t(23,"div",4)(24,"div",8)(25,"label",13),n(26,"Telefone"),e(),a(27,"input",14),e(),t(28,"div",5)(29,"label",15),n(30,"E-mail"),e(),a(31,"input",16),e()(),t(32,"div",4)(33,"div",8)(34,"label",17),n(35,"G\xEAnero"),e(),t(36,"select",18)(37,"option",11),n(38,"- Selecione"),e(),t(39,"option",19),n(40,"Masculino"),e(),t(41,"option",20),n(42,"Feminino"),e()()(),t(43,"div",8)(44,"label",21),n(45,"Data de Nascimento"),e(),a(46,"input",22),e()()(),t(47,"fieldset")(48,"legend"),n(49,"Dados de membresia"),e(),t(50,"div",4)(51,"div",8)(52,"label",23),n(53,"Data de Entrada"),e(),a(54,"input",24),e(),t(55,"div",8)(56,"label",25),n(57,"Data de Batismo"),e(),a(58,"input",26),e()()(),t(59,"fieldset")(60,"legend"),n(61,"Dados de Endere\xE7o"),e(),t(62,"div",4)(63,"div",27)(64,"label",28),n(65,"CEP"),e(),t(66,"input",29),s("change",function(K){return r.onZipCodeChange(K)}),e()(),t(67,"div",30)(68,"label",31),n(69,"Rua"),e(),a(70,"input",32),e(),t(71,"div",27)(72,"label",33),n(73,"N\xFAmero"),e(),a(74,"input",34),e()(),t(75,"div",4)(76,"div",35)(77,"label",36),n(78,"Complemento"),e(),a(79,"input",37),e()(),t(80,"div",4)(81,"div",8)(82,"label",38),n(83,"Cidade"),e(),a(84,"input",39),e(),t(85,"div",8)(86,"label",40),n(87,"Estado"),e(),a(88,"input",41),e()()()(),t(89,"mat-dialog-actions",42)(90,"button",43),s("click",function(){return r.close()}),n(91,"Cancelar"),e(),t(92,"button",44),a(93,"mat-icon",45),n(94),e()()()()()),i&2&&(m(3),u("",r.data?"Atualizar":"Novo"," Membro"),m(),l("formGroup",r.form),m(14),l("value",null),m(2),v(y(22,6,r.memberTypes$)),m(17),l("value",null),m(55),l("disabled",r.form.invalid),m(2),u(" ",r.data?"Atualizar":"Cadastrar"," Membro "))},dependencies:[w,x,I,F,E,A,S,D,N,T,L,Z,q,$,B,R,k,P],styles:[".cadastrar-container[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0b2454}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:600;margin-bottom:.35rem;color:#374151}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#f7f9fc;border-radius:.75rem}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field-appearance-outline[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#d1d5db}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__leading[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__notch[_ngcontent-%COMP%], .cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mdc-notched-outline__trailing[_ngcontent-%COMP%]{border-color:#1d4ed8}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #e5e7eb;display:flex;gap:1rem;align-items:center}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{color:#6b7280}.cadastrar-container[_ngcontent-%COMP%]   .contribution-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:3rem;border-radius:.625rem;background-color:#0b2454;font-weight:600}fieldset[_ngcontent-%COMP%]{border:1px solid #d1d5db;border-radius:.625rem;padding:1rem;margin-bottom:1.5rem}fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:600;color:#374151}@media(max-width:600px){.cadastrar-card[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1.75rem}}"]})};export{J as a};
