import{b as L}from"./chunk-GXHPU6LK.js";import{c as v,d as _,h as I}from"./chunk-JM3QEYPJ.js";import{b as E,c as C,e as d,g as P,h as w,l as y,n as S,o as x,s as O,u as k}from"./chunk-IEMRLV2L.js";import{a as A,b as F}from"./chunk-TBRSYIDA.js";import"./chunk-PUSK7AFB.js";import{Ab as o,Bb as h,E as g,Ja as b,W as m,cb as s,db as e,eb as t,fb as a,lb as p,lc as M,wc as c,za as l}from"./chunk-JN5EMR2A.js";import"./chunk-7CGTOI24.js";var N=class f{fb=m(O);router=m(v);authService=m(I);toastService=m(L);form;hidePassword=!0;ngOnInit(){this.buildForm()}buildForm(){this.form=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required]],rememberMe:[!1]});let i=localStorage.getItem(c.APP_REMEMBERED_EMAIL_KEY);i&&this.form.patchValue({email:i,rememberMe:!0})}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let{email:i,password:n,rememberMe:r}=this.form.getRawValue();r?localStorage.setItem(c.APP_REMEMBERED_EMAIL_KEY,i):localStorage.removeItem(c.APP_REMEMBERED_EMAIL_KEY),this.authService.login({email:i,password:n}).pipe(g()).subscribe({next:()=>{this.router.navigate(["/"])},error:u=>{this.toastService.error(u.error.error||"Erro desconhecido","Erro ao realizar login")}})}static \u0275fac=function(n){return new(n||f)};static \u0275cmp=b({type:f,selectors:[["app-login"]],decls:30,vars:4,consts:[[1,"auth-page","d-flex","align-items-center","justify-content-center"],[1,"auth-card"],[1,"auth-icon-wrapper"],["src","images/logo.png","alt","Logo da igreja"],[1,"auth-title"],[1,"auth-subtitle"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","email","placeholder","seu@email.com","formControlName","email",1,"form-control"],[1,"mb-3","position-relative"],["placeholder","Digite sua senha","formControlName","password",1,"form-control","pr-5",3,"type"],["type","button","tabindex","-1",1,"btn","btn-sm","btn-link","password-toggle",3,"click"],[1,"mb-4","d-flex","align-items-center","justify-content-between"],[1,"form-check"],["id","rememberMe","type","checkbox","formControlName","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],["routerLink","/auth/forgot-password"],["type","submit",1,"btn","btn-primary","auth-submit-btn","w-100","mb-4",3,"disabled"],["fontIcon","login",1,"me-2"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),a(3,"img",3),t(),e(4,"h1",4),o(5,"Gest\xE3o de Contribui\xE7\xF5es"),t(),e(6,"p",5),o(7,"Fa\xE7a login para acessar o sistema"),t(),e(8,"form",6),p("ngSubmit",function(){return r.submit()}),e(9,"div",7)(10,"label",8),o(11,"Email"),t(),a(12,"input",9),t(),e(13,"div",10)(14,"label",8),o(15,"Senha"),t(),a(16,"input",11),e(17,"button",12),p("click",function(){return r.togglePasswordVisibility()}),e(18,"mat-icon"),o(19),t()()(),e(20,"div",13)(21,"div",14),a(22,"input",15),e(23,"label",16),o(24,"Salvar email"),t()(),e(25,"a",17),o(26,"Esqueceu a senha?"),t()(),e(27,"button",18),a(28,"mat-icon",19),o(29," Entrar "),t()()()()),n&2&&(l(8),s("formGroup",r.form),l(8),s("type",r.hidePassword?"password":"text"),l(3),h(r.hidePassword?"visibility_off":"visibility"),l(8),s("disabled",r.form.invalid))},dependencies:[M,k,y,C,E,P,w,x,S,F,A,_],styles:[".password-toggle[_ngcontent-%COMP%]{min-width:2rem;color:#6b7280;background:none;border:none;outline:none;cursor:pointer;position:absolute;right:.5rem;top:50%;z-index:2}.auth-page[_ngcontent-%COMP%]{min-height:100vh;background:radial-gradient(circle at top left,#e5edf9 0,#f3f4f6 45%,#fff);padding:2rem 1rem}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:460px;background-color:#fff;border-radius:1.25rem;box-shadow:0 18px 45px #0f172a1f;padding:2.25rem 2.5rem 2.5rem}.auth-icon-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}.auth-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:1.35rem;font-weight:700;color:#0b2454;margin-bottom:.25rem}.auth-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#6b7280;margin-bottom:1.75rem}.auth-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#374151}.auth-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.75rem;border-color:#d1d5db;padding:.65rem .9rem}.auth-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#1d4ed8;box-shadow:0 0 0 1px #2563eb40}.auth-submit-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;height:2.9rem;border-radius:.625rem;background-color:#0b2454;border-color:#0b2454;font-weight:600}.auth-submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7}a[_ngcontent-%COMP%]{text-decoration:none}@media(max-width:576px){.auth-card[_ngcontent-%COMP%]{padding:1.75rem 1.5rem 2rem}}"]})};export{N as LoginComponent};
